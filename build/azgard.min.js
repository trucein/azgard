/**
 * Azgard 0.0.1
 * (c) 2016 
 * License: MIT
 */
!function(t,e){t.Version="0.0.1",t.PartialsPath="./partials",t.Service={},t.Modules={},t.Configs={},t.Filters={},t.Controllers={},t.Directives={},t.Constants={}}(window.AZGARD=window.AZGARD||{}),function(t,e){"use strict";t.AZGARD=angular.module("azgard",["ngRoute"])}(AZGARD.Modules=AZGARD.Modules||{}),function(t,e){AZGARD.Modules.AZGARD.config(["$httpProvider",function(t){t.interceptors.push("AzgardInterceptor")}])}(AZGARD.Configs=AZGARD.Configs||{}),function(t,e){t.Modules.AZGARD.factory("AzgardAction",["$http","AzgardShared","AzgardConfig",function(t,e,n){function r(r,o){return o=o||{},o.url=o.url?otps.url:n.baseUrl+n.loginSMSUrl,o.data=r||o.data,o.method=o.method||"POST",t(o).then(function(t){return e.setToken(t),t})}function o(){return e.removeToken(),opts={},opts.url=opts.url?otps.url:n.baseUrl+n.logoutUrl,opts.method=opts.method||"GET",t(opts).then(function(t){return t})}function i(){}function u(){}var a={};return a.loginOTP=r,a.logout=o,a.register=i,a.getOTP=u,a}])}(window.AZGARD=window.AZGARD||{}),function(t,e){t.Modules.AZGARD.constant("AzgardConfig",{httpInterceptor:function(){return!0},baseUrl:"/",loginUrl:"/auth/login/",loginSMSUrl:"/auth/login_with_sms",profileUrl:"/user/profile",registerUrl:"/auth/register",registerAdminUrl:"/auth/admin/register",logoutUrl:"/auth/logout",otpURL:"/auth/get/otp",authHeader:"X-Auth-Token",authToken:"",storageType:"localStorage",tokenName:"Auth",tokenPrefix:"Azgard"})}(window.AZGARD=window.AZGARD||{}),function(t,e){t.Modules.AZGARD.factory("AzgardInterceptor",["$q","AzgardShared","AzgardConfig","AzgardStorage",function(t,e,n,r){return{request:function(t){if(t.skipAuthorization)return t;if(e.isAuthenticated()){var o=n.tokenPrefix?n.tokenPrefix+"_"+n.tokenName:n.tokenName,i=r.get(o);return t.headers[n.authHeader]=i,t}},responseError:function(e){return t.reject(e)}}}])}(window.AZGARD=window.AZGARD||{}),function(t,e){t.Modules.AZGARD.provider("$auth",["AzgardConfig",function(t){Object.defineProperties(this,{httpInterceptor:{get:function(){return t.httpInterceptor},set:function(e){"function"==typeof e?t.httpInterceptor=e:t.httpInterceptor=function(){return e}}},baseUrl:{get:function(){return t.baseUrl},set:function(e){t.baseUrl=e}},loginUrl:{get:function(){return t.loginUrl},set:function(e){t.loginUrl=e}},registerUrl:{get:function(){return t.registerUrl},set:function(e){t.registerUrl=e}},profileUrl:{get:function(){return t.profileUrl},set:function(e){t.profileUrl=e}},loginSMSUrl:{get:function(){return t.loginSMSUrl},set:function(e){t.loginSMSUrl=e}},registerAdminUrl:{get:function(){return t.registerAdminUrl},set:function(e){t.registerAdminUrl=e}},logoutUrl:{get:function(){return t.logoutUrl},set:function(e){t.logoutUrl=e}},authHeader:{get:function(){return t.authHeader},set:function(e){t.authHeader=e}},authToken:{get:function(){return t.authToken},set:function(e){t.authToken=e}}}),this.$get=["$q","AzgardShared","AzgardAction",function(t,e,n){function r(t,e){return n.login(t,e)}function o(){}function i(){return n.logout()}function u(){return e.getToken()}function a(){return e.removeToken()}function g(){return e.getPayload()}function l(){return e.isAuthetenticated()}var s={};return s.login=r,s.register=o,s.logout=i,s.getToken=u,s.removeToken=a,s.getPayload=g,s.isAuthenticated=l,s}]}])}(window.AZGARD=window.AZGARD||{}),function(t,e){t.Modules.AZGARD.factory("AzgardShared",["$q","$window","$log","AzgardConfig","AzgardStorage",function(t,n,r,o,i){function u(){return i.get(d)}function a(){var t=i.get(d);if(t&&3===t.split(".").length)try{var n=t.split(".")[1],r=n.replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(decodeURIComponent(escape(window.atob(r))))}catch(o){return e}}function g(t){if(!t)return r.warn("Please pass a value");var e=t.data;e&&(angular.isObject(e)?token=e.payload.token:angular.isString(e)&&(token=e)),i.set(d,token)}function l(){i.remove(d)}function s(){return i.remove(d),t.when()}function c(){var t=i.get(d);if(t){if(3===t.split(".").length)try{var e=t.split(".")[1],r=e.replace(/-/g,"+").replace(/_/g,"/"),o=JSON.parse(n.atob(r)).exp;if(o){var u=Math.round((new Date).getTime()/1e3)>=o;return!u}}catch(a){return!0}return!0}return!1}var f={},d=o.tokenPrefix?[o.tokenPrefix,o.tokenName].join("_"):o.tokenName;return f.getToken=u,f.getPayload=a,f.setToken=g,f.removeToken=l,f.logout=s,f.isAuthenticated=c,f}])}(window.AZGARD=window.AZGARD||{}),function(t,e){t.Modules.AZGARD.factory("AzgardStorage",["$window","$log","AzgardConfig",function(t,e,n){var r=function(){try{var e=n.storageType in t&&null!==t[n.storageType];if(e){var r=Math.random().toString(36).substring(7);t[n.storageType].setItem(r,""),t[n.storageType].removeItem(r)}return e}catch(o){return!1}}();return r||e.warn(n.storageType+" is not available."),{get:function(e){return r?t[n.storageType].getItem(e):store[e]},set:function(e,o){return r?t[n.storageType].setItem(e,o):store[e]=o},remove:function(e){return r?t[n.storageType].removeItem(e):delete store[e]}}}])}(window.AZGARD=window.AZGARD||{});